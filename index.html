<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Interakt√≠v Kv√≠z</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <meta name="description" content="Egy 7 k√©rd√©ses, modern, magyar nyelv≈± interakt√≠v kv√≠z aj√°nd√©kokkal, Tailwind CSS-sel. GitHub Pages-re k√©szen." />
  <style>
    .card-enter { opacity: 0; transform: translateY(12px); }
    .card-enter-active { opacity: 1; transform: translateY(0); transition: opacity 250ms ease, transform 250ms ease; }
    .card-exit { opacity: 1; transform: translateY(0); }
    .card-exit-active { opacity: 0; transform: translateY(-12px); transition: opacity 200ms ease, transform 200ms ease; }
    .modal-fade-enter { opacity: 0; }
    .modal-fade-enter-active { opacity: 1; transition: opacity 200ms ease; }
    .modal-fade-exit { opacity: 1; }
    .modal-fade-exit-active { opacity: 0; transition: opacity 150ms ease; }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-b from-slate-50 to-white text-slate-800">
  <header class="sticky top-0 z-20 border-b border-slate-200 bg-white/80 backdrop-blur">
    <div class="mx-auto max-w-4xl px-4 py-3 flex items-center justify-between">
      <h1 class="text-xl md:text-2xl font-bold tracking-tight">4. √©vfordul√≥ - P√°rkapcsolati Kv√≠z</h1>
      <div id="score" class="text-sm md:text-base font-medium text-slate-600">Pontsz√°m: 0/0</div>
    </div>
    <div class="mx-auto max-w-4xl px-4 pb-3">
      <div class="w-full h-2 rounded-full bg-slate-200 overflow-hidden">
        <div id="progressBar" class="h-full w-0 bg-indigo-500 transition-[width] duration-300 ease-out"></div>
      </div>
      <div id="progressLabel" class="mt-1 text-xs text-slate-500">0 / 7 megv√°laszolva</div>
    </div>
  </header>

  <main class="mx-auto max-w-4xl px-4 py-8">
    <div id="cardHost"></div>

    <section id="summary" class="hidden">
      <div class="rounded-2xl border border-slate-200 bg-white p-6 md:p-8 shadow-sm">
        <h2 class="text-2xl font-semibold mb-2">üéâ K√©sz vagy!</h2>
        <p id="finalText" class="text-slate-600 mb-4"></p>
        <div class="flex flex-wrap gap-3">
          <button id="restartBtn" class="rounded-xl px-4 py-2 bg-indigo-600 text-white font-medium hover:bg-indigo-700">√öjrakezd√©s</button>
          <button id="reviewBtn" class="rounded-xl px-4 py-2 bg-white border border-slate-200 hover:bg-slate-50">V√°laszok megtekint√©se</button>
        </div>
        <div id="reviewList" class="mt-6 hidden">
          <h3 class="font-semibold mb-2">V√°laszaid</h3>
          <ol id="reviewItems" class="list-decimal pl-5 space-y-2"></ol>
        </div>
      </div>
    </section>
  </main>

  <div id="modal" class="fixed inset-0 z-30 hidden">
    <div id="modalBackdrop" class="absolute inset-0 bg-slate-900/50"></div>
    <div class="relative h-full w-full flex items-center justify-center p-4">
      <div class="w-full max-w-md rounded-2xl border border-slate-200 bg-white shadow-xl p-6">
        <div class="flex items-start gap-3">
          <div id="modalIcon" class="text-2xl">üí°</div>
          <div>
            <h3 id="modalTitle" class="text-xl font-semibold mb-1">Visszajelz√©s</h3>
            <p id="modalMessage" class="text-slate-600 whitespace-pre-line"></p>
          </div>
        </div>
        <div class="mt-6 flex justify-end">
          <button id="closeModal" class="rounded-xl px-4 py-2 bg-indigo-600 text-white font-medium hover:bg-indigo-700">Tov√°bb</button>
        </div>
      </div>
    </div>
  </div>

  <footer class="mx-auto max-w-4xl px-4 pb-10 pt-4 text-xs text-slate-500">
    K√©sz√ºlt szeretettel Ricsit≈ël, No√©minek, a 4. √©vfordul√≥jukra.
  </footer>

  <script>
    const QUESTIONS = [
      { title: "Mit szoktam csin√°lni est√©nk√©nt, ami ideges√≠t?", description: "Mikor elcsendes√ºl a h√°z, √©s a f√©ny is kialszik,\n egy apr√≥ hang m√©gis hallatszik...", options: ["Olvas√°s", "√ânekl√©s", "Nevet√©s", "Cuppog√°s"], correctIndex: 3, reward: "Alv√≥maszk, hogy jobban aludj." },
      { title: "Mi a kedvenc desszertem?", description: "Van egy desszert, amit≈ël mindig elolvadok,\n √©s ha megl√°tom, m√°ris boldog vagyok.", options: ["Panna cotta", "Soml√≥i galuska", "Tiramisu", "Brownie"], correctIndex: 2, reward: "Illatgyertya" },
      { title: "Hol volt az els≈ë randink?", description: "Ott √ºlt√ºnk ketten, kicsit f√©l√©nken,\n k√°v√© √©s nevet√©s k√≠s√©ret√©ben.", options: ["Szent Gell√©rt k√°v√©z√≥", "Duna-part", "Margitsziget", "Otthon"], correctIndex: 0, reward: "Isteni finom, premium Bor" },
      { title: "Melyik napon sz√ºletett Rico?", description: "Egy kis bund√°s sz√≠v, aki √∂r√∂m √©s k√°osz egyszerre.\n De mikor van a nagy napja?", options: ["Okt√≥ber 5", "November 9", "December 1", "Februar 10"], correctIndex: 1, reward: "Rico Pl√ºss" },
      { title: "Melyik orsz√°gban voltunk el≈ësz√∂r k√∂z√∂sen nyaralni?", description: "Tengerpart, napf√©ny √©s nevet√©s,\n ott √©reztem el≈ësz√∂r az igazi szerelmet.", options: ["G√∂r√∂gorsz√°g", "Olaszorsz√°g", "Spanyolorsz√°g", "Horv√°torsz√°g"], correctIndex: 0, reward: "Vers, el≈ëadja Dr. Don Ricardo Alejandro Junior de Vasquez" },
      { title: "Mi volt az els≈ë k√∂z√∂s otthonunk?", description: "Volt egy hely, ahol minden kezdet√©t vette ‚Äì kis lak√°s, de tele szeretettel √©s nevet√©ssel. Mi volt az els≈ë k√∂z√∂s otthonunk neve vagy c√≠me?",options: ["Attila √∫t 61.", "Attila √∫t 85.", "Wekerle S√°ndor utca 23.", "Kertv√°rosi k√∂r√∫t 15."],correctIndex: 0,reward: "Csokor vir√°g"},
      { title: "Milyen sportot ≈±z√∂k, √©s mit csin√°lok b√°rkivel, aki b√°ntani akarna t√©ged?", description: "Ha valaki b√°ntani merne t√©ged, tudd, hogy azonnal k√∂zbel√©pek √©rted. Milyen sportban j√°rtas a te harcos szerelmed?",options: ["Balett", "Box", "Karate", "Foci"],correctIndex: 1,reward: "Szt√°rbox-jegyek üòú"}
    ];

      const state = { idx: 0, answered: 0, correct: 0, selections: Array(QUESTIONS.length).fill(null) };
  const cardHost = document.getElementById('cardHost');
  const scoreEl = document.getElementById('score');
  const progressEl = document.getElementById('progressBar');
  const progressLabel = document.getElementById('progressLabel');
  const modalEl = document.getElementById('modal');
  const modalBackdrop = document.getElementById('modalBackdrop');
  const modalTitle = document.getElementById('modalTitle');
  const modalMsg = document.getElementById('modalMessage');
  const modalIcon = document.getElementById('modalIcon');
  const closeModalBtn = document.getElementById('closeModal');
  const summarySection = document.getElementById('summary');
  const finalText = document.getElementById('finalText');
  const restartBtn = document.getElementById('restartBtn');
  const reviewBtn = document.getElementById('reviewBtn');
  const reviewList = document.getElementById('reviewList');
  const reviewItems = document.getElementById('reviewItems');

  let timerInterval = null;
  const QUESTION_TIME = 10; // seconds

  function updateHeader() {
    scoreEl.textContent = `Pontsz√°m: ${state.correct}/${state.answered}`;
    const pct = (state.answered / QUESTIONS.length) * 100;
    progressEl.style.width = `${pct}%`;
    progressLabel.textContent = `${state.answered} / ${QUESTIONS.length} megv√°laszolva`;
  }

  function createCard(q, index) {
    const wrapper = document.createElement('section');
    wrapper.className = 'card card-enter rounded-2xl border border-slate-200 bg-white p-6 md:p-8 shadow-sm';

    wrapper.innerHTML = `
      <div class="flex items-center justify-between mb-4">
        <span class="text-xs font-medium tracking-wider text-indigo-600 uppercase">
          K√©rd√©s ${index + 1} / ${QUESTIONS.length}
        </span>
        <span id="countdown" class="text-xs text-slate-500">‚è≥ 10s</span>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-start">
        <div>
          <h2 class="text-xl md:text-2xl font-semibold">${q.title}</h2>
          <p class="mt-3 text-slate-600 whitespace-pre-line">${q.description}</p>
        </div>
        <div class="md:pl-6 md:border-l md:border-slate-200 flex flex-col gap-3">
          <label class="text-sm font-medium">V√°lassz</label>
          <select id="answer" class="w-full rounded-xl border-slate-300 focus:border-indigo-500 focus:ring-indigo-500">
            <option value="" disabled selected>V√°lassz...</option>
            ${q.options.map((opt, i) => `<option value="${i}">${opt}</option>`).join('')}
          </select>
          <button id="skip" class="self-start rounded-xl px-4 py-2 bg-white border border-slate-200 hover:bg-slate-50">Kihagy√°s</button>
          <div class="w-full h-2 bg-slate-200 rounded-full overflow-hidden">
            <div id="timeBar" class="h-full bg-indigo-500 w-full transition-[width] duration-1000 ease-linear"></div>
          </div>
        </div>
      </div>`;

    const answerSel = wrapper.querySelector('#answer');
    const skipBtn = wrapper.querySelector('#skip');
    const countdownEl = wrapper.querySelector('#countdown');
    const timeBar = wrapper.querySelector('#timeBar');

    let remaining = QUESTION_TIME;

    function updateTimer() {
      remaining--;
      countdownEl.textContent = `‚è≥ ${remaining}s`;
      timeBar.style.width = `${(remaining / QUESTION_TIME) * 100}%`;

      if (remaining <= 0) {
        clearInterval(timerInterval);
        state.selections[state.idx] = null;
        state.answered += 1;
        updateHeader();
        showModal(null, q.options[q.correctIndex], q.reward);
      }
    }

    timerInterval = setInterval(updateTimer, 1000);

    answerSel.addEventListener('change', (e) => {
      clearInterval(timerInterval);
      const chosenIndex = Number(e.target.value);
      state.selections[state.idx] = chosenIndex;
      const correct = chosenIndex === q.correctIndex;
      if (correct) state.correct += 1;
      state.answered += 1;
      updateHeader();
      showModal(correct, q.options[q.correctIndex], q.reward);
    });

    skipBtn.addEventListener('click', () => {
      clearInterval(timerInterval);
      state.selections[state.idx] = null;
      state.answered += 1;
      updateHeader();
      showModal(null, q.options[q.correctIndex], q.reward);
    });

    requestAnimationFrame(() => wrapper.classList.add('card-enter-active'));
    return wrapper;
  }

  function teardownCard(node) {
    return new Promise((resolve) => {
      node.classList.remove('card-enter', 'card-enter-active');
      node.classList.add('card-exit');
      requestAnimationFrame(() => {
        node.classList.add('card-exit-active');
        setTimeout(() => { node.remove(); resolve(); }, 220);
      });
    });
  }

  function renderQuestion() {
    clearInterval(timerInterval);
    cardHost.innerHTML = '';
    const q = QUESTIONS[state.idx];
    const card = createCard(q, state.idx);
    cardHost.appendChild(card);
  }


    function showModal(correct, correctAnswer, reward) {
      let title = 'Sz√©p pr√≥b√°lkoz√°s!';
      let icon = 'üí°';
      let message = '';
      if (correct === true) {
        title = 'Helyes v√°lasz!';
        icon = '‚úÖ';
        message = 'Gratul√°lok, eltal√°ltad!';
        if (reward) {
        message += `\n\nüéÅ Aj√°nd√©kod: ${reward}`;
      }
      } else if (correct === false) {
        title = 'Rossz v√°lasz';
        icon = '‚ùå';
        message = `A helyes v√°lasz: ${correctAnswer}`;
      } else {
        title = 'Kihagytad';
        icon = '‚è≠Ô∏è';
        message = `A helyes v√°lasz: ${correctAnswer}`;
      }
      
      modalTitle.textContent = title;
      modalMsg.textContent = message;
      modalIcon.textContent = icon;
      modalEl.classList.remove('hidden');
      closeModalBtn.focus();
      const closeHandler = () => {
        modalEl.classList.add('hidden');
        goNext();
        closeModalBtn.removeEventListener('click', closeHandler);
        modalBackdrop.removeEventListener('click', closeHandler);
      };
      closeModalBtn.addEventListener('click', closeHandler);
      modalBackdrop.addEventListener('click', closeHandler);
    }

    function goNext() {
      if (state.idx < QUESTIONS.length - 1) {
        const current = cardHost.querySelector('.card');
        teardownCard(current).then(() => {
          state.idx += 1;
          renderQuestion();
        });
      } else {
        cardHost.innerHTML = '';
        showSummary();
      }
    }

    function showSummary() {
      summarySection.classList.remove('hidden');
      const total = QUESTIONS.length;
      finalText.textContent = `√ñsszesen ${state.correct}/${total} helyes v√°lasz.`;
      reviewItems.innerHTML = '';
      QUESTIONS.forEach((q, i) => {
        const li = document.createElement('li');
        const sel = state.selections[i];
        const chosenText = sel === null ? 'Kihagyva' : (sel === undefined ? '‚Äî' : q.options[sel]);
        const isCorrect = sel === q.correctIndex;
        li.innerHTML = `
          <div class="rounded-lg border ${isCorrect ? 'border-green-300 bg-green-50' : 'border-slate-200 bg-slate-50'} p-3">
            <div class="font-medium">${q.title}</div>
            <div class="text-sm text-slate-600 mt-1">V√°laszod: <span class="font-medium">${chosenText}</span></div>
            <div class="text-sm text-slate-600">Helyes v√°lasz: <span class="font-medium">${q.options[q.correctIndex]}</span></div>
            <div class="text-sm text-slate-500 mt-1">Aj√°nd√©k: ${q.reward}</div>
          </div>`;
        reviewItems.appendChild(li);
      });
    }

    function resetQuiz() {
      state.idx = 0; state.answered = 0; state.correct = 0; state.selections = Array(QUESTIONS.length).fill(null);
      updateHeader(); summarySection.classList.add('hidden'); renderQuestion();
    }

    restartBtn.addEventListener('click', resetQuiz);
    reviewBtn.addEventListener('click', () => reviewList.classList.toggle('hidden'));
    updateHeader(); renderQuestion();
  </script>
</body>
</html>
